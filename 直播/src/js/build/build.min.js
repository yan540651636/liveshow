angular.module("myapp",["ui.router","oc.lazyLoad","LocalStorageModule"]);
function config(l,o,e){o.otherwise("/login"),l.state("login",{url:"/login",templateUrl:"views/login.html",controller:"login",resolve:{loadMyCtrl:["$ocLazyLoad",function(l){l.load("css/style.css"),l.load("css/reset.css")}]}}).state("wrap",{url:"/wrap",templateUrl:"views/wrap.html",controller:"wrap",resolve:{loadMyCtrl:["$ocLazyLoad",function(l){l.load("css/style.css"),l.load("css/reset.css"),l.load("css/font-awesome.css"),l.load("css/animate.css"),l.load("css/swiper-3.3.1.min.css")}]}}).state("wrap.video",{url:"/wrap.video",templateUrl:"views/video.html",controller:"video"}).state("wrap.hot",{url:"/wrap.hot",templateUrl:"views/hot.html",controller:"hot"}).state("wrap.user",{url:"/wrap.user",templateUrl:"views/user.html",controller:"user"}).state("wrap.follow",{url:"/wrap.follow",templateUrl:"views/follow.html",controller:"follow"}).state("wrap.skin",{url:"/wrap.skin",templateUrl:"views/skin.html",controller:"skin"})}config.$inject=["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider"],angular.module("myapp").config(config);
function login(o,e,a,r,t,n){o.newUserData={username:"",password:""},o.loginGo=function(){a.url("/wrap/wrap.hot")}}function video(o,e){o.myVideoData=e.myVideoData,o.commentData=e.commentData,console.log(o.commentData)}function hot(o,e,a,r){r.getInfor("./data/hotData.json","","get").success(function(e){o.hotData=e}),o.change=function(r){e.myVideoData=o.hotData[r],e.footerIco.forEach(function(o,a){e.footerIco[a].active=!1,0==a&&(e.footerIco[a].active=!0)}),a.url("/wrap/wrap.video")}}function user(o,e,a,r,t){o.myUserData=a.get("newUserData"),console.log(o.myUserData),o.wdData=[{fa:"fa-film",title:"直播",num:"1个",url:"/wrap/wrap.video"},{fa:"fa-star-o",title:"我的关注",num:e.followData.length+"个",url:"/wrap/wrap.follow"},{fa:"fa-trophy",title:"收益",num:"200个礼物",url:"/wrap/wrap.user"},{fa:"fa-laptop",title:"设置",num:"",url:"/wrap/wrap.skin"},{fa:"fa-reply",title:"退出",num:"",url:"/login"}],o.user_change=function(o){var a=2;switch(o){case"/wrap/wrap.video":a=0;break;case"/login":a=1;break;case"/wrap/wrap.follow":t.footerShow=!1,t.returnShow=!0;break;case"/wrap/wrap.skin":t.footerShow=!1,t.returnShow=!0}e.changeFooterIco(a),r.url(o)}}function follow(o,e,a){a.newTitle="我的关注",o.followData=e.followData}function skin(o,e,a){a.newTitle="设置",o.skinData=[{background:"#96ffff"},{background:"#50ff00"},{background:"#ffe300"},{background:"#ccc"},{background:"url(./img/bj1.jpg)"},{background:"url(./img/bj2.jpg)"},{background:"url(./img/bj3.jpg)"},{background:"url(./img/bj1.jpg)"}],o.changeSkin=function(o){a.skinColor=o}}function wrap(o,e,a,r){r.skinColor={background:"#ffe300"},r.footerShow=!0,r.returnShow=!1,o.footerIco=a.footerIco,r.newTitle="热门",o.returnBtn=function(o){r.footerShow=!0,r.returnShow=!1,e.url(o)},o.change=function(t){a.changeFooterIco(t),r.newTitle=a.footerIco[t].title,o.footerIco=a.footerIco,e.url(a.footerIco[t].url)}}login.$inject=["$scope","apiService","$location","$rootScope","myUserData","localStorageService"],video.$inject=["$scope","myUserData"],hot.$inject=["$scope","myUserData","$location","apiService"],user.$inject=["$scope","myUserData","localStorageService","$location","$rootScope"],follow.$inject=["$scope","myUserData","$rootScope"],skin.$inject=["$scope","myUserData","$rootScope"],wrap.$inject=["$scope","$location","myUserData","$rootScope"],angular.module("myapp").controller("login",login).controller("video",video).controller("hot",hot).controller("user",user).controller("follow",follow).controller("skin",skin).controller("wrap",wrap);
function showLb(){return{restrict:"AE",link:function(e,t){new Swiper(".swiper-container",{pagination:".swiper-pagination",autoplay:3e3,autoplayDisableOnInteraction:!1,paginationClickable:!0,loop:!0})}}}function showComment(){return{restrict:"AE",link:function(e,t){}}}function followEle(e){return{restrict:"AE",link:function(t,o){t.touchtime=0,t.followThis=function(){0==t.touchtime?t.touchtime=(new Date).getTime():(new Date).getTime()-t.touchtime<500?(Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e},o[0].className="fa fa-heart followele animated bounceInScale",setTimeout(function(){o[0].className="fa fa-heart followele"},1e3),e.followData.push({headerImg:e.myVideoData.headerImg,username:e.myVideoData.title,city:e.myVideoData.city,time:(new Date).format("yyyy-MM-dd hh:mm:ss")})):t.touchtime=(new Date).getTime()}}}}followEle.$inject=["myUserData"],angular.module("myapp").directive("showComment",showComment).directive("followEle",followEle).directive("showLb",showLb);
function api(e){function t(e){var t=[];for(var a in e)t.push(a+"='"+e[a]+"'");return t.join("&")}this.getInfor=function(a,o,c){if("get"==c){var i=t(o);return console.log(i),console.log(a),e.get(a+"?"+i)}return"jsonp"==c?e.jsonp(a):e.post(a,o)}}function myUserData(e){var t=this;this.myVideoData={headerImg:"header1.jpg",title:"我是一个粉刷匠",city:"北京",videoSrc:"./video/m7.mp4",look:2345,attention:5678},this.footerIco=[{ico:"fa-film",active:!1,url:"/wrap/wrap.video",title:"直播"},{ico:"fa-road",active:!0,url:"/wrap/wrap.hot",title:"热门"},{ico:"fa-user",active:!1,url:"/wrap/wrap.user",title:"我的信息"}],this.changeFooterIco=function(e){t.footerIco.forEach(function(a,o){t.footerIco[o].active=!1,o==e&&(t.footerIco[o].active=!0)})},this.commentData=[{cName:"总有刁民想睡朕",text:"主播我见过你",classV:"bounce_1"},{cName:"糖果过",text:"主播你吃激素啦",classV:"bounce_2"},{cName:"傻呆的小同学",text:"约么",classV:"bounce_3"},{cName:"嘟嘟",text:"你看我帅么，么么",classV:"bounce_4"},{cName:"码农届吴彦祖",text:"姑娘，交个朋友好么",classV:"bounce_5"}],this.followData=[{headerImg:"logo.png",username:"总有刁民想睡朕",city:"成都",time:"2016-03-04 11:11:01"}]}myUserData.$inject=["localStorageService"],api.$inject=["$http"],angular.module("myapp").service("myUserData",myUserData).service("apiService",api);